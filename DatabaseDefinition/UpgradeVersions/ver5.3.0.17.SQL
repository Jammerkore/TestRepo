/*RELEASE 5.3.0.17 02-20-2014 - TT#952-MD -stodd - change layout of Group Allocation Security*/
exec SP_MID_SET_TEXT 880000,'Group Allocation',50,19,null,null,0
exec SP_MID_SET_TEXT 881000,'Review',50,19,null,null,0
exec SP_MID_SET_TEXT 881100,'Matrix',50,19,null,null,0
exec SP_MID_SET_TEXT 881200,'Content',50,19,null,null,0
exec SP_MID_SET_TEXT 881300,'Characteristics',50,19,null,null,0
exec SP_MID_SET_TEXT 882000,'Actions',50,19,null,null,0
go

IF NOT EXISTS(SELECT * FROM SECURITY_FUNCTION_JOIN where FUNC_ID = 880000)
BEGIN
   INSERT INTO SECURITY_FUNCTION_JOIN(FUNC_ID, FUNC_TYPE, FUNC_LEVEL, FUNC_PARENT) VALUES(880000, 2, 0, 0);        --Group Allocation
END
GO

IF NOT EXISTS(SELECT * FROM SECURITY_FUNCTION_JOIN where FUNC_ID = 881000)
BEGIN
   INSERT INTO SECURITY_FUNCTION_JOIN(FUNC_ID, FUNC_TYPE, FUNC_LEVEL, FUNC_PARENT) VALUES(881000, 2, 1, 880000);   --Review
END
GO

--INSERT INTO SECURITY_FUNCTION_JOIN(FUNC_ID, FUNC_TYPE, FUNC_LEVEL, FUNC_PARENT) VALUES(881100, 2, 2, 881000);   --Group Allocation Review Group Matrix
--INSERT INTO SECURITY_FUNCTION_JOIN(FUNC_ID, FUNC_TYPE, FUNC_LEVEL, FUNC_PARENT) VALUES(881200, 2, 2, 881000);   --Group Allocation Review Content
--INSERT INTO SECURITY_FUNCTION_JOIN(FUNC_ID, FUNC_TYPE, FUNC_LEVEL, FUNC_PARENT) VALUES(881300, 2, 2, 881000);   --Group Allocation Review Characteristic
go

IF NOT EXISTS(SELECT * FROM SECURITY_FUNCTION_ACTIONS where FUNC_ID = 880000 AND ACTION_ID = 801160)
BEGIN
   INSERT INTO SECURITY_FUNCTION_ACTIONS(FUNC_ID, ACTION_ID) VALUES(880000, 801160);   --Group Allocation : Full Control
END
GO

IF NOT EXISTS(SELECT * FROM SECURITY_FUNCTION_ACTIONS where FUNC_ID = 880000 AND ACTION_ID = 801161)
BEGIN
   INSERT INTO SECURITY_FUNCTION_ACTIONS(FUNC_ID, ACTION_ID) VALUES(880000, 801161);   --             : Maintain
END
GO

IF NOT EXISTS(SELECT * FROM SECURITY_FUNCTION_ACTIONS where FUNC_ID = 880000 AND ACTION_ID = 801162)
BEGIN
   INSERT INTO SECURITY_FUNCTION_ACTIONS(FUNC_ID, ACTION_ID) VALUES(880000, 801162);   --             : Delete
END
GO

IF NOT EXISTS(SELECT * FROM SECURITY_FUNCTION_ACTIONS where FUNC_ID = 880000 AND ACTION_ID = 801163)
BEGIN
   INSERT INTO SECURITY_FUNCTION_ACTIONS(FUNC_ID, ACTION_ID) VALUES(880000, 801163);   --             : View
END
GO

IF NOT EXISTS(SELECT * FROM SECURITY_FUNCTION_ACTIONS where FUNC_ID = 880000 AND ACTION_ID = 801164)
BEGIN
   INSERT INTO SECURITY_FUNCTION_ACTIONS(FUNC_ID, ACTION_ID) VALUES(880000, 801164);   --             : Execute
END
GO

IF NOT EXISTS(SELECT * FROM SECURITY_FUNCTION_ACTIONS where FUNC_ID = 881000 AND ACTION_ID = 801160)
BEGIN
   INSERT INTO SECURITY_FUNCTION_ACTIONS(FUNC_ID, ACTION_ID) VALUES(881000, 801160);   --Review : Full Control
END
GO

IF NOT EXISTS(SELECT * FROM SECURITY_FUNCTION_ACTIONS where FUNC_ID = 881000 AND ACTION_ID = 801161)
BEGIN
   INSERT INTO SECURITY_FUNCTION_ACTIONS(FUNC_ID, ACTION_ID) VALUES(881000, 801161);   --       : Maintain
END
GO

IF NOT EXISTS(SELECT * FROM SECURITY_FUNCTION_ACTIONS where FUNC_ID = 881000 AND ACTION_ID = 801163)
BEGIN
   INSERT INTO SECURITY_FUNCTION_ACTIONS(FUNC_ID, ACTION_ID) VALUES(881000, 801163);   --       : View
END
GO
--INSERT INTO SECURITY_FUNCTION_ACTIONS(FUNC_ID, ACTION_ID) VALUES(881100, 801160);   --Matrix : Full Control
--INSERT INTO SECURITY_FUNCTION_ACTIONS(FUNC_ID, ACTION_ID) VALUES(881100, 801161);   --       : Maintain
--INSERT INTO SECURITY_FUNCTION_ACTIONS(FUNC_ID, ACTION_ID) VALUES(881100, 801163);   --       : View
--INSERT INTO SECURITY_FUNCTION_ACTIONS(FUNC_ID, ACTION_ID) VALUES(881200, 801160);   --Content : Full Control
--INSERT INTO SECURITY_FUNCTION_ACTIONS(FUNC_ID, ACTION_ID) VALUES(881200, 801161);   --       : Maintain
--INSERT INTO SECURITY_FUNCTION_ACTIONS(FUNC_ID, ACTION_ID) VALUES(881200, 801163);   --       : View
--INSERT INTO SECURITY_FUNCTION_ACTIONS(FUNC_ID, ACTION_ID) VALUES(881300, 801160);   --Characteristic : Full Control
--INSERT INTO SECURITY_FUNCTION_ACTIONS(FUNC_ID, ACTION_ID) VALUES(881300, 801161);   --       : Maintain
--INSERT INTO SECURITY_FUNCTION_ACTIONS(FUNC_ID, ACTION_ID) VALUES(881300, 801163);   --       : View
go

delete from SECURITY_FUNCTION_ACTIONS where FUNC_ID = 826500 and ACTION_ID = 801160 
delete from SECURITY_FUNCTION_ACTIONS where FUNC_ID = 826500 and ACTION_ID = 801161 
delete from SECURITY_FUNCTION_ACTIONS where FUNC_ID = 826500 and ACTION_ID = 801163 
delete from SECURITY_FUNCTION_JOIN where FUNC_ID = 826500 and FUNC_TYPE = 1 and FUNC_LEVEL = 2 and FUNC_PARENT = 826000 
delete from APPLICATION_TEXT where TEXT_CODE = 826500
go