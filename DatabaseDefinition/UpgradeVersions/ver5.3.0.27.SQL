/*RELEASE 5.3.0.27 03-18-2014 - TT#1077-MD -stodd - Group Allocation  View */

/* updating default group allocation view */
Update ASSORTMENT_VIEW Set ASSORTMENT_VIEW_TYPE = 2 where VIEW_RID = 3
go

IF NOT EXISTS(SELECT * FROM SECURITY_FUNCTION_JOIN where FUNC_ID = 883000)
BEGIN 
	INSERT INTO SECURITY_FUNCTION_JOIN(FUNC_ID, FUNC_TYPE, FUNC_LEVEL, FUNC_PARENT) VALUES(883000, 0, 1, 880000);   --Views
END
GO

IF NOT EXISTS(SELECT * FROM SECURITY_FUNCTION_JOIN where FUNC_ID = 883100)
BEGIN 
	INSERT INTO SECURITY_FUNCTION_JOIN(FUNC_ID, FUNC_TYPE, FUNC_LEVEL, FUNC_PARENT) VALUES(883100, 0, 2, 883000);   --Global
END
GO

IF NOT EXISTS(SELECT * FROM SECURITY_FUNCTION_JOIN where FUNC_ID = 883200)
BEGIN 
	INSERT INTO SECURITY_FUNCTION_JOIN(FUNC_ID, FUNC_TYPE, FUNC_LEVEL, FUNC_PARENT) VALUES(883200, 0, 2, 883000);   --User
END
GO

IF NOT EXISTS(SELECT * FROM SECURITY_FUNCTION_ACTIONS where FUNC_ID = 883000 AND ACTION_ID=801160)
BEGIN
   INSERT INTO SECURITY_FUNCTION_ACTIONS(FUNC_ID, ACTION_ID) VALUES(883000, 801160);   --Views : Full Control
END
GO

IF NOT EXISTS(SELECT * FROM SECURITY_FUNCTION_ACTIONS where FUNC_ID = 883000 AND ACTION_ID=801161)
BEGIN
   INSERT INTO SECURITY_FUNCTION_ACTIONS(FUNC_ID, ACTION_ID) VALUES(883000, 801161);   --      : Maintain
END
GO

IF NOT EXISTS(SELECT * FROM SECURITY_FUNCTION_ACTIONS where FUNC_ID = 883000 AND ACTION_ID=801162)
BEGIN
   INSERT INTO SECURITY_FUNCTION_ACTIONS(FUNC_ID, ACTION_ID) VALUES(883000, 801162);   --      : Delete
END
GO

IF NOT EXISTS(SELECT * FROM SECURITY_FUNCTION_ACTIONS where FUNC_ID = 883000 AND ACTION_ID=801163)
BEGIN
   INSERT INTO SECURITY_FUNCTION_ACTIONS(FUNC_ID, ACTION_ID) VALUES(883000, 801163);   --      : View
END
GO

IF NOT EXISTS(SELECT * FROM SECURITY_FUNCTION_ACTIONS where FUNC_ID = 883100 AND ACTION_ID=801160)
BEGIN
   INSERT INTO SECURITY_FUNCTION_ACTIONS(FUNC_ID, ACTION_ID) VALUES(883100, 801160);   --Global : Full Control
END
GO

IF NOT EXISTS(SELECT * FROM SECURITY_FUNCTION_ACTIONS where FUNC_ID = 883100 AND ACTION_ID=801161)
BEGIN
   INSERT INTO SECURITY_FUNCTION_ACTIONS(FUNC_ID, ACTION_ID) VALUES(883100, 801161);   --       : Maintain
END
GO

IF NOT EXISTS(SELECT * FROM SECURITY_FUNCTION_ACTIONS where FUNC_ID = 883100 AND ACTION_ID=801162)
BEGIN
   INSERT INTO SECURITY_FUNCTION_ACTIONS(FUNC_ID, ACTION_ID) VALUES(883100, 801162);   --       : Delete
END
GO

IF NOT EXISTS(SELECT * FROM SECURITY_FUNCTION_ACTIONS where FUNC_ID = 883100 AND ACTION_ID=801163)
BEGIN
   INSERT INTO SECURITY_FUNCTION_ACTIONS(FUNC_ID, ACTION_ID) VALUES(883100, 801163);   --       : View
END
GO

IF NOT EXISTS(SELECT * FROM SECURITY_FUNCTION_ACTIONS where FUNC_ID = 883200 AND ACTION_ID=801160)
BEGIN
   INSERT INTO SECURITY_FUNCTION_ACTIONS(FUNC_ID, ACTION_ID) VALUES(883200, 801160);   --User : Full Control
END
GO

IF NOT EXISTS(SELECT * FROM SECURITY_FUNCTION_ACTIONS where FUNC_ID = 883000 AND ACTION_ID=801160)
BEGIN
   INSERT INTO SECURITY_FUNCTION_ACTIONS(FUNC_ID, ACTION_ID) VALUES(883200, 801161);   --     : Maintain
END
GO

IF NOT EXISTS(SELECT * FROM SECURITY_FUNCTION_ACTIONS where FUNC_ID = 883200 AND ACTION_ID=801162)
BEGIN
   INSERT INTO SECURITY_FUNCTION_ACTIONS(FUNC_ID, ACTION_ID) VALUES(883200, 801162);   --     : Delete
END
GO

IF NOT EXISTS(SELECT * FROM SECURITY_FUNCTION_ACTIONS where FUNC_ID = 883200 AND ACTION_ID=801163)
BEGIN
   INSERT INTO SECURITY_FUNCTION_ACTIONS(FUNC_ID, ACTION_ID) VALUES(883200, 801163);   --     : View
END
GO