--dv =============================================
--dv Create date:	10/25/2013
--dv Description:	Reads size curve criteria for the hierarchy node passed in
--dv =============================================
CREATE PROCEDURE [dbo].[MID_NODE_SIZE_CURVE_CRITERIA_READ]
	@HN_RID int
AS
BEGIN
	SET NOCOUNT ON;

	SELECT 
		NSCC.HN_RID, 
		NSCC.NSCCD_RID, 
		NSCCD.PH_OFFSET_IND, 
		COALESCE(NSCCD.PH_RID, -1) PH_RID, 
		COALESCE(NSCCD.PHL_SEQUENCE, 0) PHL_SEQUENCE,
		COALESCE(NSCCD.PHL_OFFSET, -1) PHL_OFFSET, 
		COALESCE(NSCCD.CDR_RID, -1) CDR_RID, 
		NSCCD.APPLY_LOST_SALES_IND, 
		COALESCE(NSCCD.OLL_RID, -1) OLL_RID,
		COALESCE(NSCCD.CUSTOM_OLL_RID, -1) CUSTOM_OLL_RID, 
		COALESCE(NSCCD.SIZE_GROUP_RID, -1) SIZE_GROUP_RID, 
		COALESCE(NSCCD.CURVE_NAME, '') CURVE_NAME,
		COALESCE(NSCCD.SG_RID, -1) SG_RID
	FROM NODE_SIZE_CURVE_CRITERIA NSCC
		 INNER JOIN NODE_SIZE_CURVE_CRITERIA_DETAIL NSCCD ON NSCC.NSCCD_RID = NSCCD.NSCCD_RID
	WHERE NSCC.HN_RID = @HN_RID
	ORDER BY NSCC.NSCCD_RID DESC

END
GO
