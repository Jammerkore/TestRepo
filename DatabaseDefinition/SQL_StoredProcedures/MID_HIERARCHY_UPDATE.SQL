--dv =============================================
--dv Create date:	10/21/2013
--dv Description:	Updates a hierarchy node row
--dv =============================================
CREATE PROCEDURE [dbo].[MID_HIERARCHY_UPDATE]
	@HN_RID int,
	@HOME_PH_RID int,
	@HOME_LEVEL int,
	@HN_TYPE int,
	@OTS_PLANLEVEL_TYPE int,
	@USE_BASIC_REPLENISHMENT char,
	@OTS_FORECAST_LEVEL_PH_RID int,
	@OTS_FORECAST_LEVEL_SELECT_TYPE int,
	@OTS_FORECAST_LEVEL_TYPE int,
	@OTS_FORECAST_LEVEL_PHL_SEQUENCE int,
	@OTS_FORECAST_LEVEL_ANCHOR_NODE int,
	@OTS_FORECAST_LEVEL_MASK_FIELD int,
	@OTS_FORECAST_LEVEL_MASK varchar(50),
	@VIRTUAL_IND char,
	@PURPOSE int,
	@DIGITAL_ASSET_KEY int
AS
BEGIN
	SET NOCOUNT ON;

	UPDATE HIERARCHY_NODE WITH (ROWLOCK) 
	SET 
		HOME_PH_RID = @HOME_PH_RID, 
		HOME_LEVEL = @HOME_LEVEL, 
		HN_TYPE = @HN_TYPE, 
		OTS_PLANLEVEL_TYPE = @OTS_PLANLEVEL_TYPE,
		USE_BASIC_REPLENISHMENT = @USE_BASIC_REPLENISHMENT, 
		OTS_FORECAST_LEVEL_PH_RID = @OTS_FORECAST_LEVEL_PH_RID,
		OTS_FORECAST_LEVEL_SELECT_TYPE = @OTS_FORECAST_LEVEL_SELECT_TYPE,
		OTS_FORECAST_LEVEL_TYPE = @OTS_FORECAST_LEVEL_TYPE,
		OTS_FORECAST_LEVEL_PHL_SEQUENCE = @OTS_FORECAST_LEVEL_PHL_SEQUENCE,
		OTS_FORECAST_LEVEL_ANCHOR_NODE = @OTS_FORECAST_LEVEL_ANCHOR_NODE,
		OTS_FORECAST_LEVEL_MASK_FIELD = @OTS_FORECAST_LEVEL_MASK_FIELD,
		OTS_FORECAST_LEVEL_MASK = @OTS_FORECAST_LEVEL_MASK,
		VIRTUAL_IND = @VIRTUAL_IND,
		PURPOSE = @PURPOSE,
		DIGITAL_ASSET_KEY = @DIGITAL_ASSET_KEY
	WHERE HN_RID = @HN_RID

	SELECT @@ROWCOUNT;

END
GO
