CREATE PROCEDURE [dbo].[SP_MID_AUDIT_HEADER_INSERT] 
	@PROCESS_DATE_TIME DATETIME,
	@PROCESS_RID INT,
	@USER_RID INT,
	@HDR_RID INT,
	@METHOD_RID INT,
	@METHOD_NAME VARCHAR(50),
	@METHOD_TYPE INT,
	@HEADER_COMPONENT_TYPE INT,
	@ACTION_TYPE INT,
	@PACK_OR_COLOR_NAME VARCHAR(250),
	@SIZE_NAME VARCHAR(250),
	@UNITS_ALLOCATED_BY_PROCESS INT,
	@STORE_COUNT INT,
	@AUDIT_HEADER_RID INT OUTPUT
AS
BEGIN
	SET NOCOUNT ON

	INSERT INTO AUDIT_HEADER (
		PROCESS_DATE_TIME,
		PROCESS_RID,
		USER_RID,
		HDR_RID,
		METHOD_RID,
		METHOD_NAME,
		METHOD_TYPE,
		HEADER_COMPONENT_TYPE,
		ACTION_TYPE,
		PACK_OR_COLOR_NAME,
		SIZE_NAME,
		UNITS_ALLOCATED_BY_PROCESS,
		STORE_COUNT
		)
	VALUES (
		@PROCESS_DATE_TIME,
		@PROCESS_RID,
		@USER_RID,
		@HDR_RID,
		@METHOD_RID,
		@METHOD_NAME,
		@METHOD_TYPE,
		@HEADER_COMPONENT_TYPE,
		@ACTION_TYPE,
		@PACK_OR_COLOR_NAME,
		@SIZE_NAME,
		@UNITS_ALLOCATED_BY_PROCESS,
		@STORE_COUNT
		)

	SELECT @AUDIT_HEADER_RID = SCOPE_IDENTITY() -- TT#3256 - JSmith - Replace @@IDENTITY with SCOPE_IDENTITY()
END
GO


