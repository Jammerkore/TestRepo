CREATE PROCEDURE [dbo].[SP_MID_XML_TOTAL_RULE_WRITE] 
	@HDR_RID INT,
	@LAYER_ID INT,
	@RULE_TABLE TOTAL_RULE_TYPE READONLY
AS
SET NOCOUNT ON

DELETE
FROM TOTAL_RULE
WHERE HDR_RID = @HDR_RID
	AND LAYER_ID = @LAYER_ID

-- Process records
INSERT TOTAL_RULE (
	HDR_RID,
	LAYER_ID,
	ST_RID,
	RULE_TYPE_ID,
	UNITS
	)
SELECT @HDR_RID,
	@LAYER_ID,
	ST_RID,
	RULE_TYPE,
	UNITS
FROM @RULE_TABLE

RETURN
GO


