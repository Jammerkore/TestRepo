CREATE PROCEDURE [dbo].[SP_MID_ND_SZ_CRV_CRIT_INS] 
	(
	@HN_RID INT,
	@PH_OFFSET_IND CHAR(1) = NULL,
	@PH_RID INT = NULL,
	@PHL_SEQUENCE INT = NULL,
	@PHL_OFFSET INT = NULL,
	@CDR_RID INT = NULL,
	@APPLY_LOST_SALES_IND CHAR(1) = NULL,
	@OLL_RID INT = NULL,
	@CUSTOM_OLL_RID INT = NULL,
	--Begin TT#1076 - JScott - Size Curves by Set
	--	 @SIZE_GROUP_RID int = null, @CURVE_NAME varchar(50) = null, @NSCCD_RID int output)
	@SIZE_GROUP_RID INT = NULL,
	@CURVE_NAME VARCHAR(50) = NULL,
	@SG_RID INT = NULL,
	@NSCCD_RID INT OUTPUT
	)
	--End TT#1076 - JScott - Size Curves by Set
AS
BEGIN
	SET NOCOUNT ON
	SET ANSI_PADDING ON

	--Begin TT#1076 - JScott - Size Curves by Set
	--	INSERT INTO NODE_SIZE_CURVE_CRITERIA_DETAIL (PH_OFFSET_IND, PH_RID, PHL_SEQUENCE, PHL_OFFSET, CDR_RID, APPLY_LOST_SALES_IND, OLL_RID, CUSTOM_OLL_RID, SIZE_GROUP_RID, CURVE_NAME)
	--		VALUES (@PH_OFFSET_IND, @PH_RID, @PHL_SEQUENCE, @PHL_OFFSET, @CDR_RID, @APPLY_LOST_SALES_IND, @OLL_RID, @CUSTOM_OLL_RID, @SIZE_GROUP_RID, @CURVE_NAME)
	INSERT INTO NODE_SIZE_CURVE_CRITERIA_DETAIL (
		PH_OFFSET_IND,
		PH_RID,
		PHL_SEQUENCE,
		PHL_OFFSET,
		CDR_RID,
		APPLY_LOST_SALES_IND,
		OLL_RID,
		CUSTOM_OLL_RID,
		SIZE_GROUP_RID,
		CURVE_NAME,
		SG_RID
		)
	VALUES (
		@PH_OFFSET_IND,
		@PH_RID,
		@PHL_SEQUENCE,
		@PHL_OFFSET,
		@CDR_RID,
		@APPLY_LOST_SALES_IND,
		@OLL_RID,
		@CUSTOM_OLL_RID,
		@SIZE_GROUP_RID,
		@CURVE_NAME,
		@SG_RID
		)

	--End TT#1076 - JScott - Size Curves by Set
	SELECT @NSCCD_RID = SCOPE_IDENTITY() -- TT#3256 - JSmith - Replace @@IDENTITY with SCOPE_IDENTITY()

	INSERT INTO NODE_SIZE_CURVE_CRITERIA (
		HN_RID,
		NSCCD_RID
		)
	VALUES (
		@HN_RID,
		@NSCCD_RID
		)

	SET NOCOUNT OFF
	SET ANSI_PADDING OFF
END
GO


