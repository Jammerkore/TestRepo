CREATE PROCEDURE [dbo].[SP_MID_HEADER_BULK_DELETE] 
	@HDR_BC_RID INT,
	@RETURN_ROWCOUNT BIT = 1
AS
BEGIN
	SET NOCOUNT ON;
	UPDATE METHOD_RULE
	WITH (ROWLOCK)

	SET HDR_BC_RID = NULL
	WHERE HDR_BC_RID = @HDR_BC_RID

	UPDATE MASTER_HEADER
	WITH (ROWLOCK)

	SET MASTER_BC_RID = NULL
	WHERE MASTER_BC_RID = @HDR_BC_RID

	UPDATE MASTER_HEADER
	WITH (ROWLOCK)

	SET SUBORD_BC_RID = NULL
	WHERE SUBORD_BC_RID = @HDR_BC_RID

	DELETE BULK_COLOR_ALLOCATION
	WITH (ROWLOCK)
	WHERE HDR_BC_RID = @HDR_BC_RID

	DELETE BULK_COLOR_RULE
	WITH (ROWLOCK)
	WHERE HDR_BC_RID = @HDR_BC_RID

	DELETE BULK_COLOR_RULE_LAYER
	WITH (ROWLOCK)
	WHERE HDR_BC_RID = @HDR_BC_RID

	DELETE BULK_COLOR_SIZE_ALLOCATION
	WITH (ROWLOCK)
	WHERE HDR_BC_RID = @HDR_BC_RID

	DELETE HEADER_BULK_COLOR_SIZE
	WITH (ROWLOCK)
	WHERE HDR_BC_RID = @HDR_BC_RID

	DELETE HEADER_BULK_COLOR_SIZE_NEED
	WITH (ROWLOCK)
	WHERE HDR_BC_RID = @HDR_BC_RID

	DELETE HEADER_BULK_COLOR
	WITH (ROWLOCK)
	WHERE HDR_BC_RID = @HDR_BC_RID

	IF @RETURN_ROWCOUNT = 1 SELECT @@ROWCOUNT;
END
GO


