--dv =============================================
--dv Modified date: 2/18/2014
--dv Flags: REFERENCED_FROM_SQL_ONLY
--dv Description: Utility stored procedure.  Intended for one-time use after 5.21 Post Conversion has been installed.
--dv =============================================
CREATE PROCEDURE [dbo].[SP_MID_STORE_ADD_ST_RID_INDEXES] 
AS
BEGIN
	/* Add foreign key constraint to table "SIMILAR_STORES".  */
	IF NOT EXISTS (
			SELECT *
			FROM dbo.sysobjects
			WHERE id = object_id(N'[dbo].[STORES_SIMILAR_STORES_FK2]')
				AND OBJECTPROPERTY(id, N'IsForeignKey') = 1
			)
	BEGIN
		ALTER TABLE "SIMILAR_STORES" ADD CONSTRAINT "STORES_SIMILAR_STORES_FK2" FOREIGN KEY ("ST_RID") REFERENCES "STORES" ("ST_RID")
	END

	/* Add foreign key constraint to table "STORE_INTRANSIT_REV".  */
	IF NOT EXISTS (
			SELECT *
			FROM dbo.sysobjects
			WHERE id = object_id(N'[dbo].[STORE_INTRANSIT_REV_STORES_FK1]')
				AND OBJECTPROPERTY(id, N'IsForeignKey') = 1
			)
	BEGIN
		ALTER TABLE "STORE_INTRANSIT_REV" ADD CONSTRAINT "STORE_INTRANSIT_REV_STORES_FK1" FOREIGN KEY ("ST_RID") REFERENCES "STORES" ("ST_RID")
	END

	/* CREATE INDEXES ON dbo.ST_RID*/
	CREATE INDEX BULK_ALLOCATION_ST_IDX ON dbo.BULK_ALLOCATION (ST_RID)
		WITH (FILLFACTOR = 65)

	CREATE INDEX BULK_COLOR_ALLOCATION_ST_IDX ON dbo.BULK_COLOR_ALLOCATION (ST_RID)
		WITH (FILLFACTOR = 65)

	CREATE INDEX BULK_COLOR_SIZE_ALLOCATION_ST_IDX ON dbo.BULK_COLOR_SIZE_ALLOCATION (ST_RID)
		WITH (FILLFACTOR = 65)

	CREATE INDEX BULK_STORE_EXTERNAL_INTRANSIT_ST_IDX ON dbo.BULK_STORE_EXTERNAL_INTRANSIT (ST_RID)
		WITH (FILLFACTOR = 65)

	CREATE INDEX DETAIL_ALLOCATION_ST_IDX ON dbo.DETAIL_ALLOCATION (ST_RID)
		WITH (FILLFACTOR = 65)

	CREATE INDEX PACK_ALLOCATION_ST_IDX ON dbo.PACK_ALLOCATION (ST_RID)
		WITH (FILLFACTOR = 65)

	CREATE INDEX STORE_ELIGIBILITY_ST_IDX ON dbo.STORE_ELIGIBILITY (ST_RID)
		WITH (FILLFACTOR = 65)

	
	CREATE UNIQUE NONCLUSTERED INDEX [STORE_HISTORY_DAY0_ST_IDX] ON [dbo].[STORE_HISTORY_DAY0]
	(
		[ST_RID] ASC,
		[HN_RID] ASC,
		[TIME_ID] ASC
	)WITH (FILLFACTOR = 65)

	CREATE UNIQUE NONCLUSTERED INDEX [STORE_HISTORY_DAY1_ST_IDX] ON [dbo].[STORE_HISTORY_DAY1]
	(
		[ST_RID] ASC,
		[HN_RID] ASC,
		[TIME_ID] ASC
	)WITH (FILLFACTOR = 65)

	CREATE UNIQUE NONCLUSTERED INDEX [STORE_HISTORY_DAY2_ST_IDX] ON [dbo].[STORE_HISTORY_DAY2]
	(
		[ST_RID] ASC,
		[HN_RID] ASC,
		[TIME_ID] ASC
	)WITH (FILLFACTOR = 65)

	CREATE UNIQUE NONCLUSTERED INDEX [STORE_HISTORY_DAY3_ST_IDX] ON [dbo].[STORE_HISTORY_DAY3]
	(
		[ST_RID] ASC,
		[HN_RID] ASC,
		[TIME_ID] ASC
	)WITH (FILLFACTOR = 65)

	CREATE UNIQUE NONCLUSTERED INDEX [STORE_HISTORY_DAY4_ST_IDX] ON [dbo].[STORE_HISTORY_DAY4]
	(
		[ST_RID] ASC,
		[HN_RID] ASC,
		[TIME_ID] ASC
	)WITH (FILLFACTOR = 65)

	CREATE UNIQUE NONCLUSTERED INDEX [STORE_HISTORY_DAY5_ST_IDX] ON [dbo].[STORE_HISTORY_DAY5]
	(
		[ST_RID] ASC,
		[HN_RID] ASC,
		[TIME_ID] ASC
	)WITH (FILLFACTOR = 65)

	CREATE UNIQUE NONCLUSTERED INDEX [STORE_HISTORY_DAY6_ST_IDX] ON [dbo].[STORE_HISTORY_DAY6]
	(
		[ST_RID] ASC,
		[HN_RID] ASC,
		[TIME_ID] ASC
	)WITH (FILLFACTOR = 65)

	CREATE UNIQUE NONCLUSTERED INDEX [STORE_HISTORY_DAY7_ST_IDX] ON [dbo].[STORE_HISTORY_DAY7]
	(
		[ST_RID] ASC,
		[HN_RID] ASC,
		[TIME_ID] ASC
	)WITH (FILLFACTOR = 65)

	CREATE UNIQUE NONCLUSTERED INDEX [STORE_HISTORY_DAY8_ST_IDX] ON [dbo].[STORE_HISTORY_DAY8]
	(
		[ST_RID] ASC,
		[HN_RID] ASC,
		[TIME_ID] ASC
	)WITH (FILLFACTOR = 65)

	CREATE UNIQUE NONCLUSTERED INDEX [STORE_HISTORY_DAY9_ST_IDX] ON [dbo].[STORE_HISTORY_DAY9]
	(
		[ST_RID] ASC,
		[HN_RID] ASC,
		[TIME_ID] ASC
	)WITH (FILLFACTOR = 65)

	CREATE UNIQUE NONCLUSTERED INDEX [STORE_HISTORY_WEEK0_ST_IDX] ON [dbo].[STORE_HISTORY_WEEK0]
	(
		[ST_RID] ASC,
		[HN_RID] ASC,
		[TIME_ID] ASC
	)WITH (FILLFACTOR = 80)

	CREATE UNIQUE NONCLUSTERED INDEX [STORE_HISTORY_WEEK1_ST_IDX] ON [dbo].[STORE_HISTORY_WEEK1]
	(
		[ST_RID] ASC,
		[HN_RID] ASC,
		[TIME_ID] ASC
	)WITH (FILLFACTOR = 80)

	CREATE UNIQUE NONCLUSTERED INDEX [STORE_HISTORY_WEEK2_ST_IDX] ON [dbo].[STORE_HISTORY_WEEK2]
	(
		[ST_RID] ASC,
		[HN_RID] ASC,
		[TIME_ID] ASC
	)WITH (FILLFACTOR = 80)

	CREATE UNIQUE NONCLUSTERED INDEX [STORE_HISTORY_WEEK3_ST_IDX] ON [dbo].[STORE_HISTORY_WEEK3]
	(
		[ST_RID] ASC,
		[HN_RID] ASC,
		[TIME_ID] ASC
	)WITH (FILLFACTOR = 80)

	CREATE UNIQUE NONCLUSTERED INDEX [STORE_HISTORY_WEEK4_ST_IDX] ON [dbo].[STORE_HISTORY_WEEK4]
	(
		[ST_RID] ASC,
		[HN_RID] ASC,
		[TIME_ID] ASC
	)WITH (FILLFACTOR = 80)

	CREATE UNIQUE NONCLUSTERED INDEX [STORE_HISTORY_WEEK5_ST_IDX] ON [dbo].[STORE_HISTORY_WEEK5]
	(
		[ST_RID] ASC,
		[HN_RID] ASC,
		[TIME_ID] ASC
	)WITH (FILLFACTOR = 80)

	CREATE UNIQUE NONCLUSTERED INDEX [STORE_HISTORY_WEEK6_ST_IDX] ON [dbo].[STORE_HISTORY_WEEK6]
	(
		[ST_RID] ASC,
		[HN_RID] ASC,
		[TIME_ID] ASC
	)WITH (FILLFACTOR = 80)

	CREATE UNIQUE NONCLUSTERED INDEX [STORE_HISTORY_WEEK7_ST_IDX] ON [dbo].[STORE_HISTORY_WEEK7]
	(
		[ST_RID] ASC,
		[HN_RID] ASC,
		[TIME_ID] ASC
	)WITH (FILLFACTOR = 80)

	CREATE UNIQUE NONCLUSTERED INDEX [STORE_HISTORY_WEEK8_ST_IDX] ON [dbo].[STORE_HISTORY_WEEK8]
	(
		[ST_RID] ASC,
		[HN_RID] ASC,
		[TIME_ID] ASC
	)WITH (FILLFACTOR = 80)

	CREATE UNIQUE NONCLUSTERED INDEX [STORE_HISTORY_WEEK9_ST_IDX] ON [dbo].[STORE_HISTORY_WEEK9]
	(
		[ST_RID] ASC,
		[HN_RID] ASC,
		[TIME_ID] ASC
	)WITH (FILLFACTOR = 80)

	CREATE UNIQUE NONCLUSTERED INDEX [STORE_FORECAST_WEEK0_ST_IDX] ON [dbo].[STORE_FORECAST_WEEK0]
	(
		[ST_RID] ASC,
		[HN_RID] ASC,
		[FV_RID] ASC,
		[TIME_ID] ASC
	)WITH (FILLFACTOR = 80)

	CREATE UNIQUE NONCLUSTERED INDEX [STORE_FORECAST_WEEK1_ST_IDX] ON [dbo].[STORE_FORECAST_WEEK1]
	(
		[ST_RID] ASC,
		[HN_RID] ASC,
		[FV_RID] ASC,
		[TIME_ID] ASC
	)WITH (FILLFACTOR = 80)

	CREATE UNIQUE NONCLUSTERED INDEX [STORE_FORECAST_WEEK2_ST_IDX] ON [dbo].[STORE_FORECAST_WEEK2]
	(
		[ST_RID] ASC,
		[HN_RID] ASC,
		[FV_RID] ASC,
		[TIME_ID] ASC
	)WITH (FILLFACTOR = 80)

	CREATE UNIQUE NONCLUSTERED INDEX [STORE_FORECAST_WEEK3_ST_IDX] ON [dbo].[STORE_FORECAST_WEEK3]
	(
		[ST_RID] ASC,
		[HN_RID] ASC,
		[FV_RID] ASC,
		[TIME_ID] ASC
	)WITH (FILLFACTOR = 80)

	CREATE UNIQUE NONCLUSTERED INDEX [STORE_FORECAST_WEEK4_ST_IDX] ON [dbo].[STORE_FORECAST_WEEK4]
	(
		[ST_RID] ASC,
		[HN_RID] ASC,
		[FV_RID] ASC,
		[TIME_ID] ASC
	)WITH (FILLFACTOR = 80)

	CREATE UNIQUE NONCLUSTERED INDEX [STORE_FORECAST_WEEK5_ST_IDX] ON [dbo].[STORE_FORECAST_WEEK5]
	(
		[ST_RID] ASC,
		[HN_RID] ASC,
		[FV_RID] ASC,
		[TIME_ID] ASC
	)WITH (FILLFACTOR = 80)

	CREATE UNIQUE NONCLUSTERED INDEX [STORE_FORECAST_WEEK6_ST_IDX] ON [dbo].[STORE_FORECAST_WEEK6]
	(
		[ST_RID] ASC,
		[HN_RID] ASC,
		[FV_RID] ASC,
		[TIME_ID] ASC
	)WITH (FILLFACTOR = 80)

	CREATE UNIQUE NONCLUSTERED INDEX [STORE_FORECAST_WEEK7_ST_IDX] ON [dbo].[STORE_FORECAST_WEEK7]
	(
		[ST_RID] ASC,
		[HN_RID] ASC,
		[FV_RID] ASC,
		[TIME_ID] ASC
	)WITH (FILLFACTOR = 80)

	CREATE UNIQUE NONCLUSTERED INDEX [STORE_FORECAST_WEEK8_ST_IDX] ON [dbo].[STORE_FORECAST_WEEK8]
	(
		[ST_RID] ASC,
		[HN_RID] ASC,
		[FV_RID] ASC,
		[TIME_ID] ASC
	)WITH (FILLFACTOR = 80)

	CREATE UNIQUE NONCLUSTERED INDEX [STORE_FORECAST_WEEK9_ST_IDX] ON [dbo].[STORE_FORECAST_WEEK9]
	(
		[ST_RID] ASC,
		[HN_RID] ASC,
		[FV_RID] ASC,
		[TIME_ID] ASC
	)WITH (FILLFACTOR = 80)

	CREATE UNIQUE NONCLUSTERED INDEX [STORE_FORECAST_WEEK_LOCK_ST_IDX] ON [dbo].[STORE_FORECAST_WEEK_LOCK]
	(
		[ST_RID] ASC,
		[HN_RID] ASC,
		[FV_RID] ASC,
		[TIME_ID] ASC
	)WITH (FILLFACTOR = 80)


	CREATE UNIQUE NONCLUSTERED INDEX [STORE_EXTERNAL_INTRANSIT_ST_IDX] ON [dbo].[STORE_EXTERNAL_INTRANSIT]
	(
		[ST_RID] ASC,
		[HN_RID] ASC,
		[TIME_ID] ASC
	)WITH (FILLFACTOR = 80)


	CREATE INDEX STORE_INTRANSIT_ST_IDX ON dbo.STORE_INTRANSIT (ST_RID)
		WITH (FILLFACTOR = 65)

	CREATE INDEX STORE_INTRANSIT_REV_ST_IDX ON dbo.STORE_INTRANSIT_REV (ST_RID)
		WITH (FILLFACTOR = 65)

	CREATE INDEX TOTAL_ALLOCATION_ST_IDX ON dbo.TOTAL_ALLOCATION (ST_RID)
		WITH (FILLFACTOR = 65)

	CREATE INDEX TOTAL_RULE_ST_IDX ON dbo.TOTAL_RULE (ST_RID)
		WITH (FILLFACTOR = 65)

	CREATE INDEX STORE_SIZE_CURVE_BY_GROUP_ST_IDX ON dbo.STORE_SIZE_CURVE_BY_GROUP (ST_RID)
		WITH (FILLFACTOR = 65)

	CREATE INDEX SIZE_CONSTRAINT_MINMAX_SGL_RID_IDX ON SIZE_CONSTRAINT_MINMAX (SGL_RID)
		WITH (FILLFACTOR = 80)
END
GO


