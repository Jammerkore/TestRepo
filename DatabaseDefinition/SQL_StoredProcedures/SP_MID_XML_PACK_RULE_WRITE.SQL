CREATE PROCEDURE [dbo].[SP_MID_XML_PACK_RULE_WRITE] 
	@HDR_PACK_RID INT,
	@LAYER_ID INT,
	@RULE_TABLE PACK_RULE_TYPE READONLY
AS
SET NOCOUNT ON

-- Delete previous records
DELETE
FROM PACK_RULE
WHERE HDR_PACK_RID = @HDR_PACK_RID
	AND LAYER_ID = @LAYER_ID

-- Process records
INSERT PACK_RULE (
	HDR_PACK_RID,
	LAYER_ID,
	ST_RID,
	RULE_TYPE_ID,
	PACKS
	)
SELECT @HDR_PACK_RID,
	@LAYER_ID,
	ST_RID,
	RULE_TYPE,
	UNITS
FROM @RULE_TABLE

RETURN
GO


