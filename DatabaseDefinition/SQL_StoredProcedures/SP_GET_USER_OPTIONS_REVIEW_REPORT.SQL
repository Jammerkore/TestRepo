CREATE PROCEDURE [dbo].[SP_GET_USER_OPTIONS_REVIEW_REPORT] 
	@SELECTED_AUDIT_LOGGING_LEVEL INT,
	@SELECTED_FORECAST_MONITOR CHAR(1),
	@SELECTED_SALES_MONITOR CHAR(1),
	@SELECTED_DCFULFILLMENT_MONITOR CHAR(1)
AS
BEGIN
	SELECT U.USER_FULLNAME,
		U.USER_NAME,
		OPT.AUDIT_LOGGING_LEVEL,
		OPT.FORECAST_MONITOR_ACTIVE,
		OPT.MODIFY_SALES_MONITOR_ACTIVE,
		OPT.DCFULFILLMENT_MONITOR_ACTIVE
	FROM USER_OPTIONS OPT
	INNER JOIN APPLICATION_USER U ON OPT.USER_RID = U.USER_RID
	WHERE U.USER_ACTIVE_IND = '1'
		AND (
			@SELECTED_AUDIT_LOGGING_LEVEL = - 1
			OR OPT.AUDIT_LOGGING_LEVEL = @SELECTED_AUDIT_LOGGING_LEVEL
			)
		AND (
			@SELECTED_FORECAST_MONITOR = '.'
			OR OPT.FORECAST_MONITOR_ACTIVE = @SELECTED_FORECAST_MONITOR
			)
		AND (
			@SELECTED_SALES_MONITOR = '.'
			OR OPT.MODIFY_SALES_MONITOR_ACTIVE = @SELECTED_SALES_MONITOR
			)
		AND (
			@SELECTED_DCFULFILLMENT_MONITOR = '.'
			OR OPT.DCFULFILLMENT_MONITOR_ACTIVE = @SELECTED_DCFULFILLMENT_MONITOR
			)
	ORDER BY U.USER_NAME
END
GO


