CREATE PROCEDURE [dbo].[SP_MID_USER_GROUP_DELETE] 
	@GroupRID INT,
	@debug BIT = 0
AS
BEGIN
	IF (@debug = 0)
		SET NOCOUNT ON

	DELETE
	FROM [dbo].[SECURITY_GROUP_HIERARCHY_NODE] WITH (ROWLOCK)
	WHERE GROUP_RID = @GroupRID

	--DELETE
	--FROM [dbo].[SECURITY_GROUP_STORE_GRP_LEVEL] WITH (ROWLOCK)
	--WHERE GROUP_RID = @GroupRID

	DELETE
	FROM [dbo].[SECURITY_GROUP_STORE] WITH (ROWLOCK)
	WHERE GROUP_RID = @GroupRID

	DELETE
	FROM [dbo].[SECURITY_GROUP_VIEW] WITH (ROWLOCK)
	WHERE GROUP_RID = @GroupRID

	DELETE
	FROM [dbo].[SECURITY_GROUP_FUNCTION] WITH (ROWLOCK)
	WHERE GROUP_RID = @GroupRID

	DELETE
	FROM [dbo].[SECURITY_GROUP_VERSION] WITH (ROWLOCK)
	WHERE GROUP_RID = @GroupRID

	DELETE
	FROM [dbo].[USER_GROUP_JOIN] WITH (ROWLOCK)
	WHERE GROUP_RID = @GroupRID

	DELETE
	FROM [dbo].[USER_GROUP] WITH (ROWLOCK)
	WHERE GROUP_RID = @GroupRID

	SELECT @@ROWCOUNT;
END
GO


