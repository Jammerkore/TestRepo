CREATE PROCEDURE [dbo].[SP_MID_RECLASS_AUDIT_INSERT] 
	@PROCESS_RID INT,
	@RECLASS_ACTION VARCHAR(50),
	@RECLASS_ITEM_TYPE VARCHAR(50),
	@RECLASS_ITEM VARCHAR(50),
	@RECLASS_COMMENT VARCHAR(250)
AS
BEGIN
	SET NOCOUNT ON

	DECLARE @SEQ INT

	SELECT @SEQ = max(RECLASS_SEQ)
	FROM AUDIT_RECLASS
	WHERE PROCESS_RID = @PROCESS_RID

	IF @SEQ > 0
	BEGIN
		SELECT @SEQ = @SEQ + 1
	END
	ELSE
	BEGIN
		SELECT @SEQ = 1
	END

	INSERT INTO AUDIT_RECLASS (
		PROCESS_RID,
		RECLASS_SEQ,
		RECLASS_ACTION,
		RECLASS_ITEM_TYPE,
		RECLASS_ITEM,
		RECLASS_COMMENT
		)
	VALUES (
		@PROCESS_RID,
		@SEQ,
		@RECLASS_ACTION,
		@RECLASS_ITEM_TYPE,
		@RECLASS_ITEM,
		@RECLASS_COMMENT
		)

	SELECT @@ROWCOUNT;
END
GO


