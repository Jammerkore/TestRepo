--dv =============================================
--dv Modified date: 4/18/2017
--dv Notes:	
--dv History: TT#1966-MD - JSmith- DC Fulfillment
--dv ============================================= 

CREATE PROCEDURE [dbo].[MID_METHOD_CREATE_MASTER_HEADERS_READ] 
	@METHOD_RID int
AS
BEGIN
	SET NOCOUNT ON;

	SELECT 
	    METHOD_RID,
		COALESCE(USE_SELECTED_HEADERS,'0') as USE_SELECTED_HEADERS
	FROM METHOD_CREATE_MASTER_HEADERS 
	WHERE METHOD_RID = @METHOD_RID

	SELECT 
		METHOD_RID,
		SEQ,
		CASE 
		WHEN HN_RID = -1 THEN
			''
		ELSE 
		    dbo.UDF_MID_GET_NODE_DISPLAY (HN_RID)
		END AS 'Merchandise',
		COALESCE(HN_RID, -1) as HN_RID,
		FILTER_RID as 'Filter',
		FILTER_RID
	FROM METHOD_CREATE_MASTER_HEADERS_MERCHANDISE m
	WHERE METHOD_RID = @METHOD_RID
	ORDER BY SEQ

	SELECT 
		METHOD_RID,
		SEQ,
		OVERRIDE_TYPE,
		CASE 
		WHEN OVERRIDE_TYPE='C' THEN
			HCG_RID
		ELSE 
		    HEADER_FIELD
		END AS 'HEADER_CHAR_FIELD',
		HEADER_FIELD,
		HCG_RID,
		OVERRIDE_VALUE
	FROM METHOD_CREATE_MASTER_HEADERS_OVERRIDE  m
	WHERE METHOD_RID = @METHOD_RID
	ORDER BY SEQ

END
GO






