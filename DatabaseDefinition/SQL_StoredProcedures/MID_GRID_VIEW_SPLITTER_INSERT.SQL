--dv =============================================
--dv Create date:	3/26/2021
--dv Description:	Inserts a grid view splitter
--dv =============================================
CREATE PROCEDURE [dbo].[MID_GRID_VIEW_SPLITTER_INSERT] 
	@VIEW_RID int,
	@USER_RID int,
    @LAYOUT_ID int,
    @SPLITTER_TYPE_IND char(1),
    @SPLITTER_SEQUENCE int,
	@SPLITTER_PERCENTAGE int
AS
BEGIN
	SET NOCOUNT ON;

	IF NOT EXISTS (SELECT * FROM GRID_VIEW_SPLITTER WHERE 
			[VIEW_RID] = @VIEW_RID 
			AND [LAYOUT_ID] = @LAYOUT_ID
			AND [USER_RID] = @USER_RID
			AND [SPLITTER_TYPE_IND] = @SPLITTER_TYPE_IND
			AND [SPLITTER_SEQUENCE] = @SPLITTER_SEQUENCE)
		INSERT INTO GRID_VIEW_SPLITTER
			(
			[VIEW_RID],
			[USER_RID],
			[LAYOUT_ID],
			[SPLITTER_TYPE_IND],
			[SPLITTER_SEQUENCE],
			[SPLITTER_PERCENTAGE]
			)
		VALUES
			(
			@VIEW_RID,
			@USER_RID,
			@LAYOUT_ID,
			@SPLITTER_TYPE_IND,
			@SPLITTER_SEQUENCE,
			@SPLITTER_PERCENTAGE
			)
	else
		UPDATE GRID_VIEW_SPLITTER
   		   SET [SPLITTER_PERCENTAGE] = @SPLITTER_PERCENTAGE
		WHERE [VIEW_RID] = @VIEW_RID 
			AND [USER_RID] = @USER_RID
			AND [LAYOUT_ID] = @LAYOUT_ID
			AND [SPLITTER_TYPE_IND] = @SPLITTER_TYPE_IND
			AND [SPLITTER_SEQUENCE] = @SPLITTER_SEQUENCE


	SELECT @@ROWCOUNT;

END
GO
