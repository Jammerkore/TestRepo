--dv =============================================
--dv Create date:	6/25/2014
--dv Description:	Returns a count of rows that match the proposed filter name
--dv =============================================
CREATE PROCEDURE [dbo].[MID_FILTER_READ_NAME_FOR_DUPLICATE]
   	@FILTER_TYPE INT,
	@PROPOSED_FILTER_NAME VARCHAR(250),
	@FILTER_EDIT_RID INT
AS
BEGIN
	SET NOCOUNT ON;

	DECLARE @EDIT_FILTER_USER_RID INT;
	SELECT @EDIT_FILTER_USER_RID = USER_RID FROM FILTER WHERE FILTER_RID=@FILTER_EDIT_RID

	SELECT COUNT(*) AS MYCOUNT
	FROM FILTER
	WHERE FILTER_TYPE = @FILTER_TYPE 
		AND FILTER_NAME=@PROPOSED_FILTER_NAME
		AND (@EDIT_FILTER_USER_RID IS NULL OR USER_RID = @EDIT_FILTER_USER_RID)
		AND FILTER_RID <> @FILTER_EDIT_RID
	

	

END
GO
