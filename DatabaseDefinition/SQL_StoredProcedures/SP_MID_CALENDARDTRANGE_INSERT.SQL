CREATE PROCEDURE [dbo].[SP_MID_CALENDARDTRANGE_INSERT] 
	@CDR_START INT,
	@CDR_END INT,
	@CDR_RANGE_TYPE_ID INT,
	@CDR_DATE_TYPE_ID INT,
	@CDR_RELATIVE_TO INT,
	@CDR_NAME VARCHAR(50),
	@CDR_DYNAMIC_SWITCH CHAR,
	@CDR_DYNAMIC_SWITCH_DATE INT,
	@CDR_RID INT OUTPUT
AS
BEGIN
	SET NOCOUNT ON

	--INSERT INTO CALENDAR_DATE_RANGE(CDR_START, CDR_END, CDR_RANGE_TYPE_ID, CDR_DATE_TYPE_ID, CDR_RELATIVE_TO, CDR_NAME, CDR_DYNAMIC_SWITCH)
	--VALUES (@CDR_START, @CDR_END, @CDR_RANGE_TYPE_ID, @CDR_DATE_TYPE_ID, @CDR_RELATIVE_TO, @CDR_NAME, @CDR_DYNAMIC_SWITCH)
	INSERT INTO CALENDAR_DATE_RANGE (
		CDR_START,
		CDR_END,
		CDR_RANGE_TYPE_ID,
		CDR_DATE_TYPE_ID,
		CDR_RELATIVE_TO,
		CDR_NAME,
		CDR_DYNAMIC_SWITCH,
		CDR_DYNAMIC_SWITCH_DATE
		)
	VALUES (
		@CDR_START,
		@CDR_END,
		@CDR_RANGE_TYPE_ID,
		@CDR_DATE_TYPE_ID,
		@CDR_RELATIVE_TO,
		@CDR_NAME,
		@CDR_DYNAMIC_SWITCH,
		@CDR_DYNAMIC_SWITCH_DATE
		)

	SELECT @CDR_RID = SCOPE_IDENTITY() -- TT#3256 - JSmith - Replace @@IDENTITY with SCOPE_IDENTITY()
END
GO


