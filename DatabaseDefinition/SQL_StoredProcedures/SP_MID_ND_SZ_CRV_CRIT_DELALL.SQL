CREATE PROCEDURE [dbo].[SP_MID_ND_SZ_CRV_CRIT_DELALL] 
	(@HN_RID INT,
	@RETURN_ROWCOUNT BIT = 1)
AS
BEGIN
	SET NOCOUNT ON
	SET ANSI_PADDING ON

	DECLARE @DETAILS TABLE (NSCCD_RID INT)

	INSERT INTO @DETAILS
	SELECT NSCCD_RID
	FROM NODE_SIZE_CURVE_CRITERIA
	WHERE HN_RID = @HN_RID

	DELETE NODE_SIZE_CURVE_CRITERIA
	WITH (ROWLOCK)
	WHERE HN_RID = @HN_RID

	DELETE NODE_SIZE_CURVE_CRITERIA_DETAIL
	WITH (ROWLOCK)
	WHERE NSCCD_RID IN (
			SELECT NSCCD_RID
			FROM @DETAILS
			)
	
	IF @RETURN_ROWCOUNT = 1 SELECT @@ROWCOUNT;

	SET NOCOUNT OFF
	SET ANSI_PADDING OFF
END
GO


