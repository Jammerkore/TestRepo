--dv =============================================
--dv Create date:	8/14/2014
--dv Description:	Updates a group allocation method
--dv History:		9/15/2014 TT#1300-MD -jsobek -Format Exception when opening a newly created GA Method (New or copied)
--dv =============================================
CREATE PROCEDURE [dbo].[MID_METHOD_GROUP_ALLOCATION_UPDATE]
	@METHOD_RID int,
	@STORE_GRADE_TIMEFRAME int, 
	@EXCEED_MAX_IND char(1),
	@PERCENT_NEED_LIMIT float, 
	@RESERVE float, 
	@PERCENT_IND char(1),
	@MERCH_HN_RID int, 
	@MERCH_PH_RID int, 
	@MERCH_PHL_SEQUENCE int,
	@ON_HAND_HN_RID int, 
	@ON_HAND_PH_RID int, 
	@ON_HAND_PHL_SEQUENCE int,
	@ON_HAND_FACTOR float,
    @SG_RID int, 
	@MERCH_UNSPECIFIED char(1), 
	@ON_HAND_UNSPECIFIED char(1),
    @RESERVE_AS_BULK float, 
	@RESERVE_AS_PACKS float, 
	@STORE_GRADES_SG_RID int,
	@INVENTORY_IND char(1), 
	@IB_MERCH_TYPE int, 
	@IB_MERCH_HN_RID int, 
	@IB_MERCH_PH_RID int, 
	@IB_MERCH_PHL_SEQUENCE int, 
	@BEGIN_CDR_RID int, 
	@SHIP_TO_CDR_RID int, 
	@LINE_ITEM_MIN_OVERRIDE_IND char(1), 
	@LINE_ITEM_MIN_OVERRIDE int,
    @HDRINVENTORY_IND char(1), 
	@HDRIB_MERCH_TYPE int, 
	@HDRIB_MERCH_HN_RID int, 
	@HDRIB_MERCH_PH_RID int, 
	@HDRIB_MERCH_PHL_SEQUENCE int
AS
BEGIN
	SET NOCOUNT ON;

	UPDATE METHOD_GROUP_ALLOCATION
	SET
		STORE_GRADE_TIMEFRAME = @STORE_GRADE_TIMEFRAME, 
		EXCEED_MAX_IND = @EXCEED_MAX_IND,
		PERCENT_NEED_LIMIT = @PERCENT_NEED_LIMIT, 
		RESERVE = @RESERVE, 
		PERCENT_IND = @PERCENT_IND,
		MERCH_HN_RID = @MERCH_HN_RID, 
		MERCH_PH_RID = @MERCH_PH_RID, 
		MERCH_PHL_SEQUENCE = @MERCH_PHL_SEQUENCE,
		ON_HAND_HN_RID = @ON_HAND_HN_RID, 
		ON_HAND_PH_RID = @ON_HAND_PH_RID, 
		ON_HAND_PHL_SEQUENCE = @ON_HAND_PHL_SEQUENCE,
		ON_HAND_FACTOR = @ON_HAND_FACTOR,
        SG_RID = @SG_RID, 
		MERCH_UNSPECIFIED = @MERCH_UNSPECIFIED, 
		ON_HAND_UNSPECIFIED = @ON_HAND_UNSPECIFIED,
        RESERVE_AS_BULK = @RESERVE_AS_BULK, 
		RESERVE_AS_PACKS = @RESERVE_AS_PACKS, 
		STORE_GRADES_SG_RID = @STORE_GRADES_SG_RID,
		INVENTORY_IND = @INVENTORY_IND, 
		IB_MERCH_TYPE = @IB_MERCH_TYPE, 
		IB_MERCH_HN_RID = @IB_MERCH_HN_RID, 
		IB_MERCH_PH_RID = @IB_MERCH_PH_RID, 
		IB_MERCH_PHL_SEQUENCE = @IB_MERCH_PHL_SEQUENCE, 
		BEGIN_CDR_RID = @BEGIN_CDR_RID, 
		SHIP_TO_CDR_RID = @SHIP_TO_CDR_RID, 
		LINE_ITEM_MIN_OVERRIDE_IND = @LINE_ITEM_MIN_OVERRIDE_IND, 
		LINE_ITEM_MIN_OVERRIDE = @LINE_ITEM_MIN_OVERRIDE,
        HDRINVENTORY_IND = @HDRINVENTORY_IND, 
		HDRIB_MERCH_TYPE = @HDRIB_MERCH_TYPE, 
		HDRIB_MERCH_HN_RID = @HDRIB_MERCH_HN_RID, 
		HDRIB_MERCH_PH_RID = @HDRIB_MERCH_PH_RID, 
		HDRIB_MERCH_PHL_SEQUENCE = @HDRIB_MERCH_PHL_SEQUENCE
	WHERE METHOD_RID = @METHOD_RID
	

	SELECT @@ROWCOUNT;
END
GO