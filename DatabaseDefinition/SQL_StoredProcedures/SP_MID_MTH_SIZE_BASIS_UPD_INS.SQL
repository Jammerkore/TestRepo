CREATE PROCEDURE [dbo].[SP_MID_MTH_SIZE_BASIS_UPD_INS] 
	(
	@METHODRID INT,
	@BASISHDRRID INT,
	@BASISCLRRID INT,
	@RULE INT,
	@STOREFILTERRID INT,
	@SIZEGROUPRID INT,
	@HEADERCOMPONENT INT,
	@RULEQUANTITY INT,
	@SIZECONSTRAINTRID INT,
	@SIZECURVEGROUPRID INT,
	@GENCURVE_HCG_RID INT,
	@GENCURVE_HN_RID INT,
	@GENCURVE_PH_RID INT,
	@GENCURVE_PHL_SEQUENCE INT,
	@GENCURVE_COLOR_IND CHAR(1),
	@GENCURVE_MERCH_TYPE INT,
	@GENCONSTRAINT_HCG_RID INT,
	@GENCONSTRAINT_HN_RID INT,
	@GENCONSTRAINT_PH_RID INT,
	@GENCONSTRAINT_PHL_SEQUENCE INT,
	@GENCONSTRAINT_COLOR_IND CHAR(1),
	@GENCONSTRAINT_MERCH_TYPE INT,
	@USE_DEFAULT_CURVE_IND CHAR(1) = NULL,
	@GENCURVE_NSCCD_RID INT = NULL, /* TT#2155 - JEllis */
	@APPLY_RULES_ONLY_IND CHAR(1) = NULL,
	 /* TT#2155 - JEllis */
	@INCLUDE_RESERVE_IND CHAR(1) = NULL
	)
AS
BEGIN
	SET NOCOUNT ON
	SET ANSI_PADDING ON

	/*****************************************************************************************/
	/* CREATED: 7/01/2004 - JEFF SCHNIERLE                                                   */
	/* PURPOSE: INSERTS OR UPDATES DATA IN METHOD_FILL_SIZE_HOLES                            */
	/*****************************************************************************************/
	/*
	SP_HELP METHOD_FILL_SIZE_HOLES
		SELECT * FROM METHOD_FILL_SIZE_HOLES
*/
	IF NOT EXISTS (
			SELECT *
			FROM METHOD_SIZE_BASIS_ALLOCATION
			WHERE METHOD_RID = @METHODRID
			)
		--INSERT
	BEGIN
		INSERT INTO METHOD_SIZE_BASIS_ALLOCATION (
			METHOD_RID,
			SIZE_BASIS_HDR_RID,
			COLOR_CODE_RID,
			SIZE_BASIS_RULE,
			STORE_FILTER_RID,
			SIZE_GROUP_RID,
			HEADER_COMPONENT,
			RULE_QUANTITY,
			SIZE_CONSTRAINT_RID,
			SIZE_CURVE_GROUP_RID,
			GENCURVE_HCG_RID,
			GENCURVE_HN_RID,
			GENCURVE_PH_RID,
			GENCURVE_PHL_SEQUENCE,
			GENCURVE_COLOR_IND,
			GENCURVE_MERCH_TYPE,
			GENCONSTRAINT_HCG_RID,
			GENCONSTRAINT_HN_RID,
			GENCONSTRAINT_PH_RID,
			GENCONSTRAINT_PHL_SEQUENCE,
			GENCONSTRAINT_COLOR_IND,
			GENCONSTRAINT_MERCH_TYPE,
			USE_DEFAULT_CURVE_IND,
			GENCURVE_NSCCD_RID, /* TT#2155 - JEllis */
			APPLY_RULES_ONLY_IND,
			INCLUDE_RESERVE_IND
			) /* TT#2155 - JEllis */
		VALUES (
			@METHODRID,
			@BASISHDRRID,
			@BASISCLRRID,
			@RULE,
			@STOREFILTERRID,
			@SIZEGROUPRID,
			@HEADERCOMPONENT,
			@RULEQUANTITY,
			@SIZECONSTRAINTRID,
			@SIZECURVEGROUPRID,
			@GENCURVE_HCG_RID,
			@GENCURVE_HN_RID,
			@GENCURVE_PH_RID,
			@GENCURVE_PHL_SEQUENCE,
			@GENCURVE_COLOR_IND,
			@GENCURVE_MERCH_TYPE,
			@GENCONSTRAINT_HCG_RID,
			@GENCONSTRAINT_HN_RID,
			@GENCONSTRAINT_PH_RID,
			@GENCONSTRAINT_PHL_SEQUENCE,
			@GENCONSTRAINT_COLOR_IND,
			@GENCONSTRAINT_MERCH_TYPE,
			@USE_DEFAULT_CURVE_IND,
			@GENCURVE_NSCCD_RID,
			@APPLY_RULES_ONLY_IND,
			@INCLUDE_RESERVE_IND
			) /* TT#2155 - JEllis */
	END
	ELSE
		--UPDATE
	BEGIN
		UPDATE METHOD_SIZE_BASIS_ALLOCATION
		SET METHOD_RID = @METHODRID,
			SIZE_BASIS_HDR_RID = @BASISHDRRID,
			COLOR_CODE_RID = @BASISCLRRID,
			SIZE_BASIS_RULE = @RULE,
			STORE_FILTER_RID = @STOREFILTERRID,
			SIZE_GROUP_RID = @SIZEGROUPRID,
			HEADER_COMPONENT = @HEADERCOMPONENT,
			RULE_QUANTITY = @RULEQUANTITY,
			SIZE_CONSTRAINT_RID = @SIZECONSTRAINTRID,
			SIZE_CURVE_GROUP_RID = @SIZECURVEGROUPRID,
			GENCURVE_HCG_RID = @GENCURVE_HCG_RID,
			GENCURVE_HN_RID = @GENCURVE_HN_RID,
			GENCURVE_PH_RID = @GENCURVE_PH_RID,
			GENCURVE_PHL_SEQUENCE = @GENCURVE_PHL_SEQUENCE,
			GENCURVE_COLOR_IND = @GENCURVE_COLOR_IND,
			GENCURVE_MERCH_TYPE = @GENCURVE_MERCH_TYPE,
			GENCONSTRAINT_HCG_RID = @GENCONSTRAINT_HCG_RID,
			GENCONSTRAINT_HN_RID = @GENCONSTRAINT_HN_RID,
			GENCONSTRAINT_PH_RID = @GENCONSTRAINT_PH_RID,
			GENCONSTRAINT_PHL_SEQUENCE = @GENCONSTRAINT_PHL_SEQUENCE,
			GENCONSTRAINT_COLOR_IND = @GENCONSTRAINT_COLOR_IND,
			GENCONSTRAINT_MERCH_TYPE = @GENCONSTRAINT_MERCH_TYPE,
			USE_DEFAULT_CURVE_IND = @USE_DEFAULT_CURVE_IND,
			GENCURVE_NSCCD_RID = @GENCURVE_NSCCD_RID, /* TT#2155 - JEllis */
			APPLY_RULES_ONLY_IND = @APPLY_RULES_ONLY_IND, /* TT#2155 - JEllis */
			INCLUDE_RESERVE_IND = @INCLUDE_RESERVE_IND
		WHERE METHOD_RID = @METHODRID
	END
	SELECT @@ROWCOUNT;
	SET NOCOUNT OFF
	SET ANSI_PADDING OFF
END
GO


