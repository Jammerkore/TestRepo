--dv =============================================
--dv Create date:	6/25/2014
--dv Description:	Updates a filter name
--dv History:		TT#1313-MD -jsobek -Header Filters
--dv =============================================
CREATE PROCEDURE [dbo].[MID_FILTER_UPDATE_NAME]
	@FILTER_RID INT,
	@USER_RID INT,
	@FILTER_NAME VARCHAR(250)
AS
BEGIN
	SET NOCOUNT ON;

	UPDATE FILTER
    SET 
		USER_RID = @USER_RID, 
		FILTER_NAME = @FILTER_NAME
    WHERE FILTER_RID = @FILTER_RID

	DECLARE @FILTER_NAME_CONDITION_SEQ INT = (SELECT SEQ FROM FILTER_CONDITION WITH (NOLOCK) WHERE FILTER_RID=@FILTER_RID AND ELEMENT_GROUP_TYPE_INDEX=0)

	UPDATE FILTER_CONDITION
    SET 
		VALUE_TO_COMPARE = @FILTER_NAME
    WHERE FILTER_RID = @FILTER_RID AND SEQ = @FILTER_NAME_CONDITION_SEQ

	SELECT @@ROWCOUNT;

END
GO
