CREATE PROCEDURE [dbo].[SP_MID_HEADER_INSERT] 
	(
	@HDR_ID VARCHAR(100),
	@HDR_DESC VARCHAR(250),
	@HDR_DAY DATETIME,
	@ORIG_DAY DATETIME,
	@UNIT_RETAIL FLOAT,
	@UNIT_COST FLOAT,
	@UNITS_RECEIVED INT,
	@STYLE_HNRID INT,
	@PLAN_HNRID INT,
	@ON_HAND_HNRID INT,
	@BULK_MULTIPLE INT,
	@ALLOCATION_MULTIPLE INT,
	@VENDOR VARCHAR(50),
	@PURCHASE_ORDER VARCHAR(50),
	@BEGIN_DAY DATETIME,
	@NEED_DAY DATETIME,
	@SHIP_TO_DAY DATETIME,
	@RELEASE_DATETIME DATETIME,
	@RELEASE_APPROVED_DATETIME DATETIME,
	@HDR_GROUP_RID INT,
	@SIZE_GROUP_RID INT,
	@WORKFLOW_RID INT,
	@METHOD_RID INT,
	@ALLOCATION_STATUS_FLAGS INT,
	@BALANCE_STATUS_FLAGS INT,
	@SHIPPING_STATUS_FLAGS INT,
	@ALLOCATION_TYPE_FLAGS INT,
	@INTRANSIT_STATUS_FLAGS INT,
	@PERCENT_NEED_LIMIT FLOAT,
	@PLAN_PERCENT_FACTOR FLOAT,
	@RESERVE_UNITS INT,
	@GRADE_WEEK_COUNT INT,
	@DIST_CENTER VARCHAR(50),
	@HEADER_NOTES VARCHAR(1000),
	@WORKFLOW_TRIGGER CHAR,
	@EARLIEST_SHIP_DAY DATETIME,
	@API_WORKFLOW_RID INT,
	@API_WORKFLOW_TRIGGER CHAR,
	@ALLOCATED_UNITS INT,
	@ORIG_ALLOCATED_UNITS INT,
	@RELEASE_COUNT INT,
	@RSV_ALLOCATED_UNITS INT,
	@DISPLAY_STATUS INT,
	@DISPLAY_TYPE INT,
	@DISPLAY_INTRANSIT INT,
	@DISPLAY_SHIP_STATUS INT,
	@ASRT_RID INT,
	@PLACEHOLDER_RID INT,
	@ASRT_TYPE INT,
	@ALLOCATION_MULTIPLE_DEFAULT INT, /* MID Track 5761 Allocation Multiple not saved to database  */
	@GRADE_SG_RID INT,
	@ASRT_PLACEHOLDER_SEQ INT, /* TT#1227 - stodd - assortment  */
	@ASRT_HEADER_SEQ INT, /* TT#1227 - stodd - assortment  */
	/* BEGIN TT#1401 - GTaylor - Reservation Stores */
	@IMO_ID VARCHAR(50),
	@ITEM_UNITS_ALLOCATED INT,
	@ITEM_ORIG_UNITS_ALLOCATED INT,
	/* END TT#1401 - GTaylor - Reservation Stores */
	@UNITS_PER_CARTON INT,	/* TT#1652-MD - stodd - DC Carton Rounding */
	@HDR_RID INT OUTPUT
	)
AS
BEGIN
	SET NOCOUNT ON

	INSERT INTO HEADER (
		HDR_ID,
		HDR_DESC,
		HDR_DAY,
		ORIG_DAY,
		UNIT_RETAIL,
		UNIT_COST,
		UNITS_RECEIVED,
		STYLE_HNRID,
		PLAN_HNRID,
		ON_HAND_HNRID,
		BULK_MULTIPLE,
		ALLOCATION_MULTIPLE,
		VENDOR,
		PURCHASE_ORDER,
		BEGIN_DAY,
		NEED_DAY,
		SHIP_TO_DAY,
		RELEASE_DATETIME,
		RELEASE_APPROVED_DATETIME,
		HDR_GROUP_RID,
		SIZE_GROUP_RID,
		WORKFLOW_RID,
		METHOD_RID,
		ALLOCATION_STATUS_FLAGS,
		BALANCE_STATUS_FLAGS,
		SHIPPING_STATUS_FLAGS,
		ALLOCATION_TYPE_FLAGS,
		INTRANSIT_STATUS_FLAGS,
		PERCENT_NEED_LIMIT,
		PLAN_PERCENT_FACTOR,
		RESERVE_UNITS,
		GRADE_WEEK_COUNT,
		DIST_CENTER,
		HEADER_NOTES,
		WORKFLOW_TRIGGER,
		EARLIEST_SHIP_DAY,
		API_WORKFLOW_RID,
		API_WORKFLOW_TRIGGER,
		ALLOCATED_UNITS,
		ORIG_ALLOCATED_UNITS,
		RELEASE_COUNT,
		RSV_ALLOCATED_UNITS,
		DISPLAY_STATUS,
		DISPLAY_TYPE,
		DISPLAY_INTRANSIT,
		DISPLAY_SHIP_STATUS,
		ASRT_RID,
		PLACEHOLDER_RID,
		ASRT_TYPE,
		ALLOCATION_MULTIPLE_DEFAULT,
		GRADE_SG_RID,
		ASRT_PLACEHOLDER_SEQ,
		ASRT_HEADER_SEQ, /* MID Track 5761 Allocation Multiple not saved to database */
		/* BEGIN TT#1401 - GTaylor - Reservation Stores */
		IMO_ID,
		ITEM_UNITS_ALLOCATED,
		ITEM_ORIG_UNITS_ALLOCATED,
		UNITS_PER_CARTON,	/* TT#1652-MD - stodd - DC Carton Rounding */
		DC_FULFILLMENT_PROCESSED_IND  /* TT#1966-MD - JSmith- DC Fulfillment  */
		) 
	/* END TT#1401 - GTaylor - Reservation Stores */
	VALUES (
		@HDR_ID,
		@HDR_DESC,
		@HDR_DAY,
		@ORIG_DAY,
		@UNIT_RETAIL,
		@UNIT_COST,
		@UNITS_RECEIVED,
		@STYLE_HNRID,
		@PLAN_HNRID,
		@ON_HAND_HNRID,
		@BULK_MULTIPLE,
		@ALLOCATION_MULTIPLE,
		@VENDOR,
		@PURCHASE_ORDER,
		@BEGIN_DAY,
		@NEED_DAY,
		@SHIP_TO_DAY,
		@RELEASE_DATETIME,
		@RELEASE_APPROVED_DATETIME,
		@HDR_GROUP_RID,
		@SIZE_GROUP_RID,
		@WORKFLOW_RID,
		@METHOD_RID,
		@ALLOCATION_STATUS_FLAGS,
		@BALANCE_STATUS_FLAGS,
		@SHIPPING_STATUS_FLAGS,
		@ALLOCATION_TYPE_FLAGS,
		@INTRANSIT_STATUS_FLAGS,
		@PERCENT_NEED_LIMIT,
		@PLAN_PERCENT_FACTOR,
		@RESERVE_UNITS,
		@GRADE_WEEK_COUNT,
		@DIST_CENTER,
		@HEADER_NOTES,
		@WORKFLOW_TRIGGER,
		@EARLIEST_SHIP_DAY,
		@API_WORKFLOW_RID,
		@API_WORKFLOW_TRIGGER,
		@ALLOCATED_UNITS,
		@ORIG_ALLOCATED_UNITS,
		@RELEASE_COUNT,
		@RSV_ALLOCATED_UNITS,
		@DISPLAY_STATUS,
		@DISPLAY_TYPE,
		@DISPLAY_INTRANSIT,
		@DISPLAY_SHIP_STATUS,
		@ASRT_RID,
		@PLACEHOLDER_RID,
		@ASRT_TYPE,
		@ALLOCATION_MULTIPLE_DEFAULT,
		@GRADE_SG_RID,
		@ASRT_PLACEHOLDER_SEQ,
		@ASRT_HEADER_SEQ, /* MID TRack 5761 Allocation Multiple not saved to database */
		/* BEGIN TT#1401 - GTaylor - Reservation Stores */
		@IMO_ID,
		@ITEM_UNITS_ALLOCATED,
		@ITEM_ORIG_UNITS_ALLOCATED,
		@UNITS_PER_CARTON,	/* TT#1652-MD - stodd - DC Carton Rounding */
		'0'  /* TT#1966-MD - JSmith- DC Fulfillment  */
		) /* MID TRack 5761 Allocation Multiple not saved to database */

	/* END TT#1401 - GTaylor - Reservation Stores */
	SELECT @HDR_RID = SCOPE_IDENTITY() -- TT#3256 - JSmith - Replace @@IDENTITY with SCOPE_IDENTITY() 
END
GO


