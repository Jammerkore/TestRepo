CREATE PROCEDURE [dbo].[SP_MID_XML_DETAIL_RULE_WRITE] 
	@HDR_RID INT,
	@LAYER_ID INT,
	@RULE_TABLE DETAIL_RULE_TYPE READONLY
AS
SET NOCOUNT ON

-- Delete previous records
DELETE
FROM DETAIL_RULE
WHERE HDR_RID = @HDR_RID
	AND LAYER_ID = @LAYER_ID

-- Process records
INSERT DETAIL_RULE (
	HDR_RID,
	LAYER_ID,
	ST_RID,
	RULE_TYPE_ID,
	UNITS
	)
SELECT @HDR_RID,
	@LAYER_ID,
	ST_RID,
	RULE_TYPE,
	UNITS
FROM @RULE_TABLE

RETURN
GO


