CREATE PROCEDURE [dbo].[SP_MID_MTH_SZ_NEED_UPD_INS] 
	(
	@METHODRID INT,
	@SIZEGROUPRID INT = NULL,
	@SIZECURVEGROUPRID INT = NULL,
	@MERCHTYPE INT = NULL,
	@MERCHHNRID INT = NULL,
	@MERCHPHRID INT = NULL,
	@MERCHPHLSEQ INT = NULL,
	@AVGPACKDEVIATION FLOAT = NULL,
	@MAXPACKNEED FLOAT = NULL,
	@SIZEALTERNATERID INT = NULL,
	@SIZECONSTRAINTRID INT = NULL,
	@GENCURVE_HCG_RID INT = NULL,
	@GENCURVE_HN_RID INT = NULL,
	@GENCURVE_PH_RID INT = NULL,
	@GENCURVE_PHL_SEQUENCE INT = NULL,
	@GENCURVE_COLOR_IND CHAR(1) = NULL,
	@GENCURVE_MERCH_TYPE INT = NULL,
	@GENCONSTRAINT_HCG_RID INT = NULL,
	@GENCONSTRAINT_HN_RID INT = NULL,
	@GENCONSTRAINT_PH_RID INT = NULL,
	@GENCONSTRAINT_PHL_SEQUENCE INT = NULL,
	@GENCONSTRAINT_COLOR_IND CHAR(1) = NULL,
	@GENCONSTRAINT_MERCH_TYPE INT = NULL,
	@NORMALIZE_SIZE_CURVES_IND CHAR(1) = NULL,
	@OVERRIDE_AVG_PACK_DEV_IND CHAR(1) = NULL,
	@OVERRIDE_MAX_PACK_NEED_IND CHAR(1) = NULL,
	@USE_DEFAULT_CURVE_IND CHAR(1) = NULL,
	@GENCURVE_NSCCD_RID INT = NULL, /* TT#1365 - JEllis - FL Detail Pack Size Need Enhancement */
	@PACK_TOLERANCE_NO_MAX_STEP_IND CHAR(1) = NULL,
	@PACK_TOLERANCE_STEPPED_IND CHAR(1) = NULL, /* TT#1365 - JEllis - FL Detail Pack Size Need Enhancement */ /* TT#2155 - JEllis */
	@APPLY_RULES_ONLY_IND CHAR(1) = NULL, /* TT#2155 - JEllis */
	@IB_MERCH_TYPE INT = NULL, -- TT#41-MD - GTaylor - UC#2
	@IB_MERCH_HN_RID INT = NULL,
	@IB_MERCH_PH_RID INT = NULL,
	@IB_MERCH_PHL_SEQUENCE INT = NULL, -- TT#41-MD - GTaylor - UC#2
	@VSW_SIZE_CONSTRAINTS_IND CHAR(1) = NULL,
	@VSW_SIZE_CONSTRAINTS INT = NULL -- TT#246-MD - AGallagher - VSW Size - Add In-store Size Constraint options 
	)
AS
BEGIN
	SET NOCOUNT ON
	SET ANSI_PADDING ON

	/*****************************************************************************************/
	/* CREATED: 9/16/2004 - JEFF SCHNIERLE                                                   */
	/* UPDATED: 3/18/2005 - STEVE TODD - added new size model fields			             */
	/* UPDATED: 3/3/2006  - Jim Ellis  - Removed Fringe                                      */
	/* PURPOSE: INSERTS OR UPDATES DATA IN METHOD_SIZE_NEED                                  */
	/*****************************************************************************************/
	/*
	SP_HELP METHOD_FILL_SIZE_HOLES
		SELECT * FROM METHOD_SIZE_NEED
*/
	IF NOT EXISTS (
			SELECT *
			FROM METHOD_SIZE_NEED
			WHERE METHOD_RID = @METHODRID
			)
		--INSERT
	BEGIN
		INSERT INTO METHOD_SIZE_NEED (
			METHOD_RID,
			SIZE_GROUP_RID,
			SIZE_CURVE_GROUP_RID,
			MERCH_HN_RID,
			MERCH_PH_RID,
			MERCH_PHL_SEQUENCE,
			AVG_PACK_DEV_TOLERANCE,
			MAX_PACK_NEED_TOLERANCE,
			MERCH_TYPE,
			SIZE_ALTERNATE_RID,
			SIZE_CONSTRAINT_RID,
			GENCURVE_HCG_RID,
			GENCURVE_HN_RID,
			GENCURVE_PH_RID,
			GENCURVE_PHL_SEQUENCE,
			GENCURVE_COLOR_IND,
			GENCURVE_MERCH_TYPE,
			GENCONSTRAINT_HCG_RID,
			GENCONSTRAINT_HN_RID,
			GENCONSTRAINT_PH_RID,
			GENCONSTRAINT_PHL_SEQUENCE,
			GENCONSTRAINT_COLOR_IND,
			GENCONSTRAINT_MERCH_TYPE,
			NORMALIZE_SIZE_CURVES_IND,
			OVERRIDE_AVG_PACK_DEV_IND,
			OVERRIDE_MAX_PACK_NEED_IND,
			USE_DEFAULT_CURVE_IND,
			GENCURVE_NSCCD_RID, /* TT#1365 - JEllis - FL Detail Pack Size Need Enhancement */
			PACK_TOLERANCE_NO_MAX_STEP_IND,
			PACK_TOLERANCE_STEPPED_IND, /* TT#1365 - JEllis - FL Detail Pack Size Need Enhancement */ /* TT#2155 - JEllis */
			APPLY_RULES_ONLY_IND, /* TT#2155 - JEllis */
			IB_MERCH_TYPE,
			IB_MERCH_HN_RID,
			IB_MERCH_PH_RID,
			IB_MERCH_PHL_SEQUENCE, -- TT#41-MD - GTaylor - UC#2
			VSW_SIZE_CONSTRAINTS_IND,
			VSW_SIZE_CONSTRAINTS -- TT#246-MD - AGallagher - VSW Size - Add In-store Size Constraint options 
			)
		VALUES (
			@METHODRID,
			@SIZEGROUPRID,
			@SIZECURVEGROUPRID,
			@MERCHHNRID,
			@MERCHPHRID,
			@MERCHPHLSEQ,
			@AVGPACKDEVIATION,
			@MAXPACKNEED,
			@MERCHTYPE,
			@SIZEALTERNATERID,
			@SIZECONSTRAINTRID,
			@GENCURVE_HCG_RID,
			@GENCURVE_HN_RID,
			@GENCURVE_PH_RID,
			@GENCURVE_PHL_SEQUENCE,
			@GENCURVE_COLOR_IND,
			@GENCURVE_MERCH_TYPE,
			@GENCONSTRAINT_HCG_RID,
			@GENCONSTRAINT_HN_RID,
			@GENCONSTRAINT_PH_RID,
			@GENCONSTRAINT_PHL_SEQUENCE,
			@GENCONSTRAINT_COLOR_IND,
			@GENCONSTRAINT_MERCH_TYPE,
			@NORMALIZE_SIZE_CURVES_IND,
			@OVERRIDE_AVG_PACK_DEV_IND,
			@OVERRIDE_MAX_PACK_NEED_IND,
			@USE_DEFAULT_CURVE_IND,
			@GENCURVE_NSCCD_RID,
			@PACK_TOLERANCE_NO_MAX_STEP_IND,
			@PACK_TOLERANCE_STEPPED_IND, /* TT#1365 - JEllis - FL Detail Pack Size Need Enhancement */ /* TT#2155 - JEllis */
			@APPLY_RULES_ONLY_IND, /* TT#2155 - JEllis */
			@IB_MERCH_TYPE,
			@IB_MERCH_HN_RID,
			@IB_MERCH_PH_RID,
			@IB_MERCH_PHL_SEQUENCE, -- TT#41-MD - GTaylor - UC#2	 
			@VSW_SIZE_CONSTRAINTS_IND,
			@VSW_SIZE_CONSTRAINTS -- TT#246-MD - AGallagher - VSW Size - Add In-store Size Constraint options 
			)
	END
	ELSE
		--UPDATE
	BEGIN
		UPDATE METHOD_SIZE_NEED
		SET METHOD_RID = @METHODRID,
			SIZE_GROUP_RID = @SIZEGROUPRID,
			SIZE_CURVE_GROUP_RID = @SIZECURVEGROUPRID,
			MERCH_HN_RID = @MERCHHNRID,
			MERCH_PH_RID = @MERCHPHRID,
			MERCH_PHL_SEQUENCE = @MERCHPHLSEQ,
			AVG_PACK_DEV_TOLERANCE = @AVGPACKDEVIATION,
			MAX_PACK_NEED_TOLERANCE = @MAXPACKNEED,
			MERCH_TYPE = @MERCHTYPE,
			SIZE_ALTERNATE_RID = @SIZEALTERNATERID,
			SIZE_CONSTRAINT_RID = @SIZECONSTRAINTRID,
			GENCURVE_HCG_RID = @GENCURVE_HCG_RID,
			GENCURVE_HN_RID = @GENCURVE_HN_RID,
			GENCURVE_PH_RID = @GENCURVE_PH_RID,
			GENCURVE_PHL_SEQUENCE = @GENCURVE_PHL_SEQUENCE,
			GENCURVE_COLOR_IND = @GENCURVE_COLOR_IND,
			GENCURVE_MERCH_TYPE = @GENCURVE_MERCH_TYPE,
			GENCONSTRAINT_HCG_RID = @GENCONSTRAINT_HCG_RID,
			GENCONSTRAINT_HN_RID = @GENCONSTRAINT_HN_RID,
			GENCONSTRAINT_PH_RID = @GENCONSTRAINT_PH_RID,
			GENCONSTRAINT_PHL_SEQUENCE = @GENCONSTRAINT_PHL_SEQUENCE,
			GENCONSTRAINT_COLOR_IND = @GENCONSTRAINT_COLOR_IND,
			GENCONSTRAINT_MERCH_TYPE = @GENCONSTRAINT_MERCH_TYPE,
			NORMALIZE_SIZE_CURVES_IND = @NORMALIZE_SIZE_CURVES_IND,
			OVERRIDE_AVG_PACK_DEV_IND = @OVERRIDE_AVG_PACK_DEV_IND,
			OVERRIDE_MAX_PACK_NEED_IND = @OVERRIDE_MAX_PACK_NEED_IND,
			USE_DEFAULT_CURVE_IND = @USE_DEFAULT_CURVE_IND,
			GENCURVE_NSCCD_RID = @GENCURVE_NSCCD_RID, /* TT#1365 - JEllis - FL Detail Pack Size Need Enhancement */
			PACK_TOLERANCE_NO_MAX_STEP_IND = @PACK_TOLERANCE_NO_MAX_STEP_IND, /* TT#1365 - JEllis - FL Detail Pack Size Need Enhancement */
			PACK_TOLERANCE_STEPPED_IND = @PACK_TOLERANCE_STEPPED_IND, /* TT#1365 - JEllis - FL Detail Pack Size Need Enhancement */ /* TT#2155 - JELlis */
			APPLY_RULES_ONLY_IND = @APPLY_RULES_ONLY_IND, /* TT#2155 - JEllis */
			IB_MERCH_TYPE = @IB_MERCH_TYPE, -- TT#41-MD - GTaylor - UC#2
			IB_MERCH_HN_RID = @IB_MERCH_HN_RID, -- TT#41-MD - GTaylor - UC#2
			IB_MERCH_PH_RID = @IB_MERCH_PH_RID, -- TT#41-MD - GTaylor - UC#2
			IB_MERCH_PHL_SEQUENCE = @IB_MERCH_PHL_SEQUENCE, -- TT#41-MD - GTaylor - UC#2
			VSW_SIZE_CONSTRAINTS_IND = @VSW_SIZE_CONSTRAINTS_IND, -- TT#246-MD - AGallagher - VSW Size - Add In-store Size Constraint options 
			VSW_SIZE_CONSTRAINTS = @VSW_SIZE_CONSTRAINTS -- TT#246-MD - AGallagher - VSW Size - Add In-store Size Constraint options 
		WHERE METHOD_RID = @METHODRID
	END

	SELECT @@ROWCOUNT

	SET NOCOUNT OFF
	SET ANSI_PADDING OFF
END
GO


