CREATE PROCEDURE [dbo].[SP_MID_DELETE_HEADER_ALLOCATION] 
	(@HDR_RID INT)
AS
BEGIN
	SET NOCOUNT ON

	DELETE
	FROM TOTAL_ALLOCATION WITH (ROWLOCK)
	WHERE HDR_RID = @HDR_RID

	DELETE
	FROM DETAIL_ALLOCATION WITH (ROWLOCK)
	WHERE HDR_RID = @HDR_RID

	DELETE
	FROM BULK_ALLOCATION WITH (ROWLOCK)
	WHERE HDR_RID = @HDR_RID

	DELETE
	FROM BULK_COLOR_ALLOCATION WITH (ROWLOCK)
	WHERE HDR_RID = @HDR_RID

	DELETE
	FROM BULK_COLOR_SIZE_ALLOCATION WITH (ROWLOCK)
	WHERE HDR_RID = @HDR_RID

	DELETE
	FROM PACK_ALLOCATION WITH (ROWLOCK)
	WHERE HDR_RID = @HDR_RID

	SELECT @@ROWCOUNT;
END
GO


