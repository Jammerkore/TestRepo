--dv =============================================
--dv Create date:	10/17/2013
--dv Description:	Updates the header data based on the header rid passed in
--dv =============================================
CREATE PROCEDURE [dbo].[MID_HEADER_UPDATE]
	@HDR_RID int,
	@HDR_ID varchar(100),
	@HDR_DESC varchar(250),
	@HDR_DAY datetime,
	@ORIG_DAY datetime,
	@UNIT_RETAIL float,
	@UNIT_COST float,
	@UNITS_RECEIVED int,
	@STYLE_HNRID int,
	@PLAN_HNRID int,
	@ON_HAND_HNRID int,
	@BULK_MULTIPLE int,
	@ALLOCATION_MULTIPLE int,
	@VENDOR varchar(50),
	@PURCHASE_ORDER varchar(50),
	@BEGIN_DAY datetime,
	@NEED_DAY datetime,
	@SHIP_TO_DAY datetime,
	@RELEASE_DATETIME datetime,
	@RELEASE_APPROVED_DATETIME datetime,
	@HDR_GROUP_RID int,
	@SIZE_GROUP_RID int,
	@WORKFLOW_RID int,
	@METHOD_RID int,
	@ALLOCATION_STATUS_FLAGS int,
	@BALANCE_STATUS_FLAGS int,
	@SHIPPING_STATUS_FLAGS int,
	@ALLOCATION_TYPE_FLAGS int,
	@INTRANSIT_STATUS_FLAGS int,
	@PERCENT_NEED_LIMIT float,
	@PLAN_PERCENT_FACTOR float,
	@RESERVE_UNITS int,
	@GRADE_WEEK_COUNT int,
	@DIST_CENTER varchar(50),
	@HEADER_NOTES varchar(1000),
	@WORKFLOW_TRIGGER char,
	@EARLIEST_SHIP_DAY datetime,
	@API_WORKFLOW_RID int,
	@API_WORKFLOW_TRIGGER char,
	@ALLOCATED_UNITS int,
	@ORIG_ALLOCATED_UNITS int,
	@RELEASE_COUNT int,
	@RSV_ALLOCATED_UNITS int,
	@StrStylAloctnManualChgCnt int,
	@StrSizeAloctnManualChgCnt int,
	@storeStyleAllocationChangedTotal int,
	@storeSizeAllocationChangedTotal int,
	@storesWithAllocationCount int,
	@horizonOverride char,
	@DISPLAY_STATUS int,
	@DISPLAY_TYPE int,
	@DISPLAY_INTRANSIT int,
	@DISPLAY_SHIP_STATUS int,
	@ASRT_RID int,
	@PLACEHOLDER_RID int,
	@ASRT_TYPE int,
	@ALLOCATION_MULTIPLE_DEFAULT int,
	@GRADE_SG_RID int,
	@ASRT_PLACEHOLDER_SEQ int,
	@ASRT_HEADER_SEQ int,
	@GRADE_INVENTORY_IND char,
	@GRADE_INVENTORY_HNRID int,
	@IMO_ID varchar(50),
	@ITEM_UNITS_ALLOCATED int,
	@ITEM_ORIG_UNITS_ALLOCATED int,
	@UNITS_PER_CARTON int,	/* TT#1652-MD - stodd - DC Carton Rounding */
	@DC_FULFILLMENT_PROCESSED_IND char  /* TT#1966-MD - JSmith- DC Fulfillment  */
AS
BEGIN
	SET NOCOUNT ON;

	UPDATE HEADER WITH (ROWLOCK) 
	SET 
		HDR_ID = @HDR_ID,
		HDR_DESC = @HDR_DESC,
		HDR_DAY = @HDR_DAY,
		ORIG_DAY = @ORIG_DAY,
        UNIT_RETAIL = @UNIT_RETAIL,
		UNIT_COST = @UNIT_COST,
		UNITS_RECEIVED = @UNITS_RECEIVED,
        STYLE_HNRID = @STYLE_HNRID, 
		PLAN_HNRID = @PLAN_HNRID, 
		ON_HAND_HNRID = @ON_HAND_HNRID,
        BULK_MULTIPLE = @BULK_MULTIPLE, 
		ALLOCATION_MULTIPLE = @ALLOCATION_MULTIPLE, 
		VENDOR = @VENDOR, 
		PURCHASE_ORDER = @PURCHASE_ORDER,
        BEGIN_DAY = @BEGIN_DAY, 
		NEED_DAY = @NEED_DAY, 
		SHIP_TO_DAY = @SHIP_TO_DAY,
        RELEASE_DATETIME = @RELEASE_DATETIME, 
		RELEASE_APPROVED_DATETIME = @RELEASE_APPROVED_DATETIME,
        HDR_GROUP_RID = @HDR_GROUP_RID, 
		SIZE_GROUP_RID = @SIZE_GROUP_RID, 
		WORKFLOW_RID = @WORKFLOW_RID, 
		METHOD_RID = @METHOD_RID,
        ALLOCATION_STATUS_FLAGS = @ALLOCATION_STATUS_FLAGS, 
		BALANCE_STATUS_FLAGS = @BALANCE_STATUS_FLAGS,
        SHIPPING_STATUS_FLAGS = @SHIPPING_STATUS_FLAGS, 
		ALLOCATION_TYPE_FLAGS = @ALLOCATION_TYPE_FLAGS, 
		INTRANSIT_STATUS_FLAGS = @INTRANSIT_STATUS_FLAGS,
        PERCENT_NEED_LIMIT = @PERCENT_NEED_LIMIT,  
		PLAN_PERCENT_FACTOR = @PLAN_PERCENT_FACTOR, 
		RESERVE_UNITS = @RESERVE_UNITS,
        GRADE_WEEK_COUNT = @GRADE_WEEK_COUNT, 
		DIST_CENTER = @DIST_CENTER, 
		HEADER_NOTES = @HEADER_NOTES,
		WORKFLOW_TRIGGER = @WORKFLOW_TRIGGER, 
		EARLIEST_SHIP_DAY = @EARLIEST_SHIP_DAY, 
		API_WORKFLOW_RID = @API_WORKFLOW_RID, 
		API_WORKFLOW_TRIGGER = @API_WORKFLOW_TRIGGER,
        ALLOCATED_UNITS = @ALLOCATED_UNITS, 
		ORIG_ALLOCATED_UNITS = @ORIG_ALLOCATED_UNITS, 
		RELEASE_COUNT = @RELEASE_COUNT, 
		RSV_ALLOCATED_UNITS = @RSV_ALLOCATED_UNITS,
        MANUALLYCHGDSTRSTYLALOCTNCNT = @StrStylAloctnManualChgCnt, 
		MANUALLYCHGDSTRSIZEALOCTNCNT = @StrSizeAloctnManualChgCnt,
        MANUALLYCHGDSTRSTYLEALOCTN = @storeStyleAllocationChangedTotal, 
		MANUALLYCHGDSTRSIZEALOCTN = @storeSizeAllocationChangedTotal,
        STORES_WITH_ALOCTN_COUNT = @storesWithAllocationCount, 
		HORIZON_OVERRIDE = @horizonOverride,
        DISPLAY_STATUS = @DISPLAY_STATUS, 
		DISPLAY_TYPE = @DISPLAY_TYPE, 
		DISPLAY_INTRANSIT = @DISPLAY_INTRANSIT, 
		DISPLAY_SHIP_STATUS = @DISPLAY_SHIP_STATUS,
        ASRT_RID = @ASRT_RID, 
		PLACEHOLDER_RID = @PLACEHOLDER_RID, 
		ASRT_TYPE = @ASRT_TYPE, 
		ALLOCATION_MULTIPLE_DEFAULT = @ALLOCATION_MULTIPLE_DEFAULT,
        GRADE_SG_RID = @GRADE_SG_RID, 
		ASRT_PLACEHOLDER_SEQ = @ASRT_PLACEHOLDER_SEQ, 
		ASRT_HEADER_SEQ = @ASRT_HEADER_SEQ,
	    GRADE_INVENTORY_IND = @GRADE_INVENTORY_IND, 
		GRADE_INVENTORY_HNRID = @GRADE_INVENTORY_HNRID,
        IMO_ID = @IMO_ID, 
		ITEM_UNITS_ALLOCATED = @ITEM_UNITS_ALLOCATED, 
		ITEM_ORIG_UNITS_ALLOCATED = @ITEM_ORIG_UNITS_ALLOCATED,
		UNITS_PER_CARTON = @UNITS_PER_CARTON,	/* TT#1652-MD - stodd - DC Carton Rounding */
		DC_FULFILLMENT_PROCESSED_IND = @DC_FULFILLMENT_PROCESSED_IND  /* TT#1966-MD - JSmith- DC Fulfillment  */
	WHERE HDR_RID = @HDR_RID

	SELECT @@ROWCOUNT;

END
GO
